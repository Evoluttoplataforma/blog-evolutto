---
import FeaturedEventCard from './FeaturedEventCard.astro';
import EventMiniCard from './EventMiniCard.astro';
import { events, getFeaturedEvent, getUpcomingEvents } from '../../data/events';

const featuredEvent = getFeaturedEvent();
const upcomingEvents = getUpcomingEvents(3);
---

{(featuredEvent || upcomingEvents.length > 0) && (
  <section class="events-section">
    <div class="events-container">
      <div class="events-grid">
        {/* Featured Event - Left Column */}
        {featuredEvent && (
          <div class="events-featured">
            <span class="section-label">Evento do momento</span>
            <FeaturedEventCard
              title={featuredEvent.title}
              description={featuredEvent.description}
              date={featuredEvent.date}
              time={featuredEvent.time}
              tag={featuredEvent.tag}
              ctaText={featuredEvent.ctaText}
              ctaUrl={featuredEvent.ctaUrl}
              image={featuredEvent.image}
            />
          </div>
        )}

        {/* Monthly Events - Right Column */}
        {upcomingEvents.length > 0 && (
          <div class="events-list">
            <span class="section-label">Eventos do mes</span>
            <div class="events-list-items">
              {upcomingEvents.map((event) => (
                <EventMiniCard
                  title={event.title}
                  date={event.date}
                  time={event.time}
                  tag={event.tag}
                  ctaText={event.ctaText}
                  ctaUrl={event.ctaUrl}
                />
              ))}
            </div>
          </div>
        )}
      </div>
    </div>
  </section>
)}

<style>
  .events-section {
    padding: var(--space-8, 32px) 0 var(--space-12, 48px);
    background: var(--bg-secondary, #f8fafc);
    border-bottom: 1px solid var(--border-light, #e2e8f0);
  }

  .events-container {
    max-width: var(--container-xl, 1280px);
    margin: 0 auto;
    padding: 0 var(--space-4, 16px);
  }

  @media (min-width: 768px) {
    .events-container {
      padding: 0 var(--space-6, 24px);
    }
  }

  @media (min-width: 1024px) {
    .events-container {
      padding: 0 var(--space-8, 32px);
    }
  }

  .events-grid {
    display: grid;
    gap: 32px;
  }

  @media (min-width: 1024px) {
    .events-grid {
      grid-template-columns: 1.2fr 1fr;
      gap: 40px;
    }
  }

  .section-label {
    display: block;
    margin-bottom: 16px;
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--text-muted, #64748b);
  }

  .events-featured {
    display: flex;
    flex-direction: column;
  }

  .events-list {
    display: flex;
    flex-direction: column;
  }

  .events-list-items {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  /* Ensure equal height on desktop */
  @media (min-width: 1024px) {
    .events-featured,
    .events-list {
      height: 100%;
    }

    .events-list-items {
      flex: 1;
      justify-content: space-between;
    }
  }
</style>
